{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$ref": "#/definitions/ValidatedPatterns",
  "definitions": {
    "ValidatedPatterns": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "enabled": {
          "type": "string",
          "enum": [
            "all",
            "core",
            "plumbing"
          ]
        },
        "secretStore": {
          "$ref": "#/definitions/SecretStore"
        },
        "main": {
          "$ref": "#/definitions/Main"
        },
        "global": {
          "$ref": "#/definitions/Global"
        },
        "clusterGroup": {
          "$ref": "#/definitions/ClusterGroup"
        }
      },
      "required": [
        "clusterGroup"
      ],
      "title": "ValidatedPatterns"
    },
    "SecretStore": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the external secret backend",
          "default": "vault-backend"
        },
        "kind": {
          "type": "string",
          "description": "Type of the external secret backend",
          "default": "ClusterSecretStore"
        }
      },
      "required": [
        "name",
        "kind"
      ],
      "title": "SecretsStore"
    },
    "Main": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "clusterGroupName"
      ],
      "title": "Main",
      "description": "This section contains the 'main' variables which are used by the install chart only and are passed to helm via the Makefile",
      "properties": {
        "clusterGroupName": {
          "type": "string"
        },
        "git": {
          "type": "object",
          "additionalProperties": false,
          "required": [
            "repoURL",
            "revision"
          ],
          "properties": {
            "repoURL": {
              "type": "string",
              "description": "URL of the pattern's git repository"
            },
            "revision": {
              "type": "string",
              "description": "revision (branch/commit/ref) to use on the pattern's git repository"
            }
          }
        },
        "gitops": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "channel": {
              "type": "string",
              "description": "The channel from which to install the gitops operator",
              "default": "stable"
            }
          }
        }
      }
    },
    "Global": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "pattern": {
          "type": "string"
        },
        "clusterDomain": {
          "type": "string"
        },
        "localClusterDomain": {
          "type": "string"
        },
        "targetRevision": {
          "type": "string"
        },
        "hubClusterDomain": {
          "type": "string"
        },
        "namespace": {
          "type": "string"
        },
        "repoURL": {
          "type": "string"
        },
        "git": {
          "$ref": "#/definitions/GlobalGit"
        },
        "options": {
          "$ref": "#/definitions/Options"
        }
      },
      "required": [
        "options",
        "pattern"
      ],
      "title": "Global"
    },
    "GlobalGit": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "hostname": {
          "type": "string"
        },
        "account": {
          "type": "string"
        },
        "email": {
          "type": "string"
        },
        "dev_revision": {
          "type": "string"
        }
      },
      "required": [
        "hostname",
        "account",
        "email"
      ],
      "title": "GlobalGit"
    },
    "Options": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "useCSV": {
          "type": "boolean"
        },
        "syncPolicy": {
          "type": "string"
        },
        "installPlanApproval": {
          "type": "string"
        }
      },
      "required": [
        "installPlanApproval",
        "syncPolicy",
        "useCSV"
      ],
      "title": "Options"
    },
    "ClusterGroup": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string"
        },
        "targetCluster": {
          "type": "string"
        },
        "isHubCluster": {
          "type": "boolean"
        },
        "insecureUnsealVaultInsideCluster": {
          "type": "boolean"
        },
        "namespaces": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "operatorgroupExcludes": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "subscriptions": {
          "anyOf": [
            {
              "type": "array"
            },
            {
              "type": "object"
            }
          ],
          "items": {
            "$ref": "#/definitions/Subscription"
          }
        },
        "projects": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "applications": {
          "anyOf": [
            {
              "type": "array"
            },
            {
              "type": "object"
            }
          ],
          "items": {
            "$ref": "#/definitions/Applications"
          }
        },
        "imperative": {
          "$ref": "#/definitions/Imperative"
        },
        "managedClusterGroups": {
          "anyOf": [
            {
              "type": "array"
            },
            {
              "type": "object"
            }
          ],
          "items": {
            "$ref": "#/definitions/ManagedClusterGroup"
          }
        },
        "externalClusters": {
          "type": "array"
        }
      },
      "required": [
        "applications",
        "insecureUnsealVaultInsideCluster",
        "isHubCluster",
        "managedClusterGroups",
        "name",
        "namespaces",
        "projects"
      ],
      "title": "ClusterGroup"
    },
    "Applications": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "name": {
          "type": "string"
        },
        "repoURL": {
          "type": "string"
        },
        "targetRevision": {
          "type": "string"
        },
        "chart": {
          "type": "string"
        },
        "kustomize": {
          "type": "boolean"
        },
        "plugin": {
          "type": "object"
        },
        "extraValueFiles": {
          "type": "array"
        },
        "extraHubClusterDomainFields": {
          "type": "array"
        },
        "extraLocalClusterDomainFields": {
          "type": "array"
        },
        "extraRepoURLFields": {
          "type": "array"
        },
        "extraTargetRevisionFields": {
          "type": "array"
        },
        "extraNamespaceFields": {
          "type": "array"
        },
        "extraPatternNameFields": {
          "type": "array"
        },
        "overrides": {
          "type": "object"
        },
        "fileParameters": {
          "type": "array"
        },
        "ignoreDifferences": {
          "type": "array"
        },
        "syncPolicy": {
          "type": "object"
        },
        "namespace": {
          "type": "string"
        },
        "project": {
          "type": "string"
        },
        "path": {
          "type": "string"
        }
      },
      "required": [
        "name",
        "path",
        "project"
      ],
      "title": "Applications"
    },
    "Imperative": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "jobs": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Job"
          }
        },
        "image": {
          "type": "string",
          "default": "registry.redhat.io/ansible-automation-platform-22/ee-supported-rhel8:latest"
        },
        "namespace": {
          "type": "string",
          "default": "imperative",
          "enum": [
            "imperative"
          ]
        },
        "serviceAccountCreate": {
          "type": "boolean"
        },
        "valuesConfigMap": {
          "type": "string"
        },
        "cronJobName": {
          "type": "string"
        },
        "jobName": {
          "type": "string"
        },
        "imagePullPolicy": {
          "type": "string",
          "default": "Always",
          "enum": [
            "Always",
            "IfNotPresent",
            "Never"
          ]
        },
        "activeDeadlineSeconds": {
          "type": "integer",
          "default": 3600
        },
        "schedule": {
          "type": "string",
          "default": "*/10 * * * *"
        },
        "insecureUnsealVaultInsideClusterSchedule": {
          "type": "string",
          "default": "*/5 * * * *"
        },
        "verbosity": {
          "type": "string",
          "default": "",
          "enum": [
            "",
            "-v",
            "-vv",
            "-vvv",
            "-vvvv"
          ]
        },
        "serviceAccountName": {
          "type": "string"
        },
        "clusterRoleName": {
          "type": "string"
        },
        "clusterRoleYaml": {
          "type": ["string", "array"]
        },
        "roleName": {
          "type": "string"
        },
        "roleYaml": {
          "type": "string"
        }
      },
      "required": [
        "jobs"
      ],
      "title": "Imperative"
    },
    "Job": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string"
        },
        "playbook": {
          "type": "string"
        },
        "timeout": {
          "type": ["integer", "string"]
        },
        "image": {
          "type": "string",
          "default": "registry.redhat.io/ansible-automation-platform-22/ee-supported-rhel8:latest"
        },
        "tags": {
          "type": "string"
        },
        "extravars": {
          "type": "array"
        },
        "verbosity": {
          "type": "string"
        }
      },
      "required": [
        "name",
        "playbook"
      ],
      "title": "Job"
    },
    "ManagedClusterGroup": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string"
        },
        "targetRevision": {
          "type": "string"
        },
        "acmlabels": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ACMLabels"
          }
        },
        "hostedArgoSites": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/HostedArgoSites"
          }
        },
        "clusterPools": {
          "type": "object",
          "items": {
            "$ref": "#/definitions/ClusterPools"
          }
        },
        "clusterSelector": {
          "type": "object",
          "additionalProperties": true
        },
        "helmOverrides": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/HelmOverride"
          }
        }
      },
      "required": [],
      "title": "ManagedClusterGroup"
    },
    "ClusterPools": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "size": {
          "type": "integer"
        },
        "name": {
          "type": "string"
        },
        "openshiftVersion": {
          "type": "string"
        },
        "baseDomain": {
          "type": "string"
        },
        "platform": {
          "type": "object",
          "$ref": "#/definitions/ClusterPoolsPlatform"
        },
        "clusters": {
          "type": "array"
        }
      },
      "required": [
        "name",
        "openshiftVersion",
        "baseDomain",
        "platform",
        "clusters"
      ],
      "title": "ClusterPools"
    },
    "ClusterPoolsPlatform": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "baseDomainResourceGroupName": {
          "type": "string"
        },
        "region": {
          "type": "string"
        }
      },
      "required": [
        "region"
      ],
      "title": "ClusterPoolsPlatform"
    },
    "HelmOverride": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string"
        },
        "value": {
          "type": "string"
        }
      },
      "required": [
        "name",
        "value"
      ],
      "title": "HelmOverride"
    },
    "ACMLabels": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string"
        },
        "value": {
          "type": "string"
        }
      },
      "required": [
        "name",
        "value"
      ],
      "title": "ACMLabels"
    },
    "Subscription": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string"
        },
        "namespaces": {
          "type": "array"
        },
        "namespace": {
          "type": "string"
        },
        "sourceNamespace": {
          "type": "string"
        },
        "source": {
          "type": "string"
        },
        "channel": {
          "type": "string"
        },
        "csv": {
          "type": "string"
        },
        "installPlanApproval": {
          "type": "string",
          "enum": [
            "Manual",
            "Automatic"
          ]
        },
        "config": {
          "type": "object",
          "$ref": "#/definitions/SubscriptionsConfigEnv"
        },
        "disabled": {
          "type": "boolean"
        }
      },
      "required": [
        "name"
      ],
      "title": "Subscription"
    },
    "SubscriptionsConfigEnv": {
      "type": "array",
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string"
        },
        "value": {
          "type": "string"
        }
      },
      "required": [
        "name",
        "value"
      ],
      "title": "SubscriptionsConfigEnv"
    },
    "HostedArgoSites": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string"
        },
        "domain": {
          "type": "string"
        },
        "bearerKeyPath": {
          "type": "string"
        },
        "caKeyPath": {
          "type": "string"
        }
      },
      "required": [
        "name",
        "domain"
      ],
      "title": "HostedArgoSites"
    }
  }
}
